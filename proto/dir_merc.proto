syntax = "proto3";

package mercenario;

option go_package = "LAB_4DISTRIBUIDOS/proto";

// Servicio para la comunicación con el director
service Director {
  // Mercenario informa su estado de preparación
  rpc Preparacion(Mercenario) returns (Respuesta);
  
  // Mercenario informa su decisión en un piso específico
  rpc DecisionesPiso(Piso) returns (Respuesta);
  
  // Mercenario consulta el monto acumulado en el doshbank
  rpc ConsultarDoshBank(Vacio) returns (Monto);

  // Director envía la señal de inicio de piso a cada mercenario
  rpc IniciarPiso(Vacio) returns (Iniciar);

  // Director informa a un mercenario específico sobre su muerte
  rpc InformarMuerte(Mercenario) returns (Respuesta);
}

// Mensaje que representa a un mercenario
message Mercenario {
  string nombre = 1;
  int32 id = 2;
}

// Mensaje que representa un piso y la decisión tomada
message Piso {
  int32 numero = 1;
  string decision = 2;
  Mercenario mercenario = 3;
}

// Mensaje de respuesta general
message Respuesta {
  string mensaje = 1;
  bool exito = 2;
}

// Mensaje que representa el monto en el doshbank
message Monto {
  int64 monto = 1;
}

// Mensaje vacío utilizado para solicitudes que no requieren parámetros
message Vacio {}

// Mensaje para iniciar el piso
message Iniciar {
  string mensaje = 1;
}
